function adjustAnchor(){var n=$(":target"),t=$(".navbar-fixed-top").outerHeight();n.length>0&&window.scrollTo(0,n.offset().top-t)}var Ajax=function(){function n(n,t){this.successHandler=n;this.failHandler=t}return Object.defineProperty(n.prototype,"success",{set:function(n){this.successHandler=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fail",{set:function(n){this.failHandler=n},enumerable:!0,configurable:!0}),n.prototype.readJson=function(n){this.successHandler&&this.successHandler(n)},n.prototype.onreadystatechange=function(){if(this.xhr.readyState===4){var n=this.xhr,t=n.responseURL,i=n.status,r=n.statusText;this.xhr.status<200||this.xhr.status>=400?this.failHandler&&this.failHandler({responseURL:t,status:i,statusText:r}):this.readJson({responseURL:t,status:i,json:JSON.parse(this.xhr.responseText),headers:this.xhr.getAllResponseHeaders()})}},n.prototype.post=function(n){this.uri=n;var t=new XMLHttpRequest;this.xhr=t;t.open("POST",n);t.ontimeout=this.onerror.bind(this);t.onreadystatechange=this.onreadystatechange.bind(this);t.onerror=this.onerror;t.send()},n.prototype.ontimeout=function(){var n=new Error;n.message=this.uri+"timeout";this.failHandler&&this.failHandler()},n.prototype.onerror=function(n){this.failHandler&&this.failHandler(n)},n}(),Infinite=function(){function n(n){this.ajax=n;this.forbidden=!1}return Object.defineProperty(n.prototype,"count",{get:function(){return this.counting},set:function(n){this.counting=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"requestURL",{get:function(){return this.uri},set:function(n){this.uri=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"templates",{get:function(){return{CONTAINR:"infinite",ITEM:['<div class="medium-list__item">','    <a href="/a/',"",'">','        <div class="medium-list__image">','            <div class="medium-list__image-s" style="background-image:url(/resource/',"",');"><\/div>',"        <\/div>",'        <div class="medium-list__footer">','            <div class="medium-list__footer-container mobile-flex-vc">','                <div class="medium-list__title line-clamp--2"><span>',"","<\/span><\/div>","            <\/div>","        <\/div>","    <\/a>","<\/div>"]}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"threshold",{get:function(){return 30},enumerable:!0,configurable:!0}),n.prototype.getDocumentHeight=function(){var t=document.body,n=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)},n.prototype.hideIndicator=function(){this.loadingIndicator&&(this.loadingIndicator.style.display="none")},n.prototype.getScrollTop=function(){return window.pageYOffset!==undefined?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},n.prototype.onSuccess=function(n){var e=document.createElement("div"),u=n.json,f,i,r,t;if(!u.length){window.removeEventListener("scroll",this.scrollHandler);document.querySelector(".nomore").style.display="block";this.hideIndicator();return}for(this.hideIndicator(),f=[],i=0;i<u.length;i++)r=u[i],t=this.templates.ITEM,t[2]=r.id,t[6]=r.image,t[12]=r.title,f.push(t.join(""));e.innerHTML=f.join("");this.container.appendChild(e);this.fetching=!1},n.prototype.onFail=function(){this.forbidden=!0},n.prototype.onScroll=function(){this.forbidden&&this.fetching||this.getScrollTop()<this.getDocumentHeight()-window.innerHeight||(this.fetching=!0,this.loadingIndicator&&(this.loadingIndicator.style.display="block"),this.count+=1,this.ajax.post(this.requestURL+this.count))},n.prototype.initializeInfinite=function(){(this.container=document.getElementById(this.templates.CONTAINR),this.loadingIndicator=document.getElementById("indicator"),this.container)&&(this.ajax.success=this.onSuccess.bind(this),this.ajax.fail=this.onFail.bind(this),this.fetching=!1,this.count=0,this.bindInfinite())},n.prototype.initialize=function(){this.initializeInfinite()},n.prototype.bindInfinite=function(){var n=this.onScroll.bind(this);this.scrollHandler=n;window.addEventListener("scroll",n)},n}(),infinite,App,ScrollFix;document.getElementById("infinite")&&(infinite=new Infinite(new Ajax),infinite.requestURL=/\/t\//.test(window.location)?"/api/json/listtag/"+/\/t\/([^\/]*)/.exec(window.location)[1]+"/":"/api/json/list/",infinite.initialize());App=function(){function n(){}return n.prototype._adapt=function(){var n,t,r,i;document.querySelectorAll(".nav__item").forEach(function(n){n.classList.remove("active")});n=window.location.pathname;n=="/"&&document.getElementById("menu-home").classList.add("active");t=/\/t\/([^\/]*)\/*$/.exec(n);t&&(r=t[1],i=document.getElementById("menu-"+r),i&&i.classList.add("active"))},n}();(new App)._adapt();ScrollFix=function(){function n(){}return n.prototype.initialize=function(){var t=this,n;(this.element=document.querySelector(".article-nav"),this.element)&&((n=this.element.querySelectorAll("a"),!n||n.length<1)||(window.addEventListener("hashchange",this.adjustAnchor),window.addEventListener("load",this.adjustAnchor),n.forEach(function(n){n.addEventListener("click",function(n){window.location.hash==n.target.getAttribute("href")&&(n.preventDefault(),t.adjustAnchor())})})))},n.prototype.adjustAnchor=function(){var n=document.querySelector(":target");n&&window.scrollTo(0,n.offsetTop-45)},n}();(new ScrollFix).initialize()